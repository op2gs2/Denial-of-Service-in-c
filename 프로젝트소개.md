# 시스템프로그래밍 프로젝트 (DoS 공격도구)

## 프로젝트 멤버 이름 및 담당 파트
- 김동영: SYN Flooding 공격의 구현을 담당하고 있습니다. <br>
팀장으로써, 본 저장소의 관리, 과제 제출 및 담당분야의 코드 구현, PPT, 보고서 작성 및 검토을 맡고 있습니다.
- 정웅교: ICMP 프로토콜을 사용한 ping of death 공격의 구현을 담당하고 있습니다. <br> 
팀원으로써, 담당 분야의 코드 구현, PPT, 보고서 작성 및 검토을 맡고 있습니다.

## 프로젝트 소개 및 개발 내용 소개

서비스 거부 공격인 DoS(Denial of Service) 공격을 수행하는 프로그램을 구현합니다. <br>
DoS 공격이란, 서비스 거부 공격으로, 다량의 패킷을 보내어 해당 서비스나 시스템을 마비시키는 공격입니다. <br>
본 프로젝트를 통해, 몇가지 DoS 공격을 구현하였습니다.

### Ping of Death (ICMP DoS Attack)
크기가 큰 ICMP 패킷을 보내 시스템을 바쁘게 만드는 공격이다. 크기가 큰 패킷은 네트워크 상에서 분할되어 목적지로 전송된다. 목적지에서는 분할된 많은 ICMP 패킷을 받아들이게 되고, 목적지의 서비스에 과부하를 일으키게 된다.

Ping of death 는
ICMP 패킷의 크기를 정상보다 아주 크게 만들어 네트워크에 과부하를 주는 고전적인 DoS 방법이다.
ICMP 패킷의 길이가 커지면 시스템이 처리할 수 있는 크기에 맞춰 큰 패킷이 조각과 되는데 이는
정상적인 ping 보다 부하가 훨씬 많이 걸린다. <br>

### SYN Flooding (TCP SYN DoS Attack)
TCP 3-way handshake 의 취약점을 이용한 공격이다. 클라이언트가 SYN 패킷을 보내면,
서버는 SYN 과 ACK 패킷을 클라이언트에게 보낸다. 이때, 공격자는 다시 ACK 패킷을
보내지 않고 계속적으로 SYN 을 보내면 목적지 서버의 연결정보(로그)가 쌓여 특정서비스가
마비된다.

SYN Flooding 은 TCP 패킷 중 하나인, SYN 패킷을
지속적으로 보내는 공격이다. SYN 페킷을 받은 서버는 클라이언트의 응답을 기다리게 되는데,
클라이언트는 응답없이 SYN 패킷만을 보낸다. 그러면 서버가 클라이언트의 응답을 기다리게 되는데,
이 과정에서 시스템 자원을 고갈하게 되는 공격이다. <br>


## 프로젝트 개발 결과물 소개

### 메인함수 ([DoS.c](https://github.com/op2gs2/Denial_of_Service_in_c/blob/main/DoS.c))

사용자의 입력을 받아 처리하는 코드입니다. 여기서 명령행 인자를 통해, 사용자의 입력을 받습니다. <br>
명령행 인자가 적절한지 확인후, getopt()를 통해 옵션을 분류합니다. 그 다음, 옵션에 따라 코드를 실행하게 됩니다.

### Ping of Death ([ping_flooding_byWork.c](https://github.com/op2gs2/Denial_of_Service_in_c/blob/main/ping_flooding_byWork.c))

함수의 변수를 선언 후, IP주소들을 매개변수로부터 받아와 별도의 변수에 저장합니다. 로우 소켓을 생성합니다. 이 소켓으로 네트워크 계층에 접근할 수 있으며 <br>
소켓 설정을 통해 IP 헤더와 브로드캐스트 접근을 허용시킵니다. <br>
페이로드 크기를  IP 헤더 크기 + ICMP 헤더 크기 + 임의의값 (65508) 으로 설정합니다. <br>
IP 헤더를 가르키는 구조체를 만들어 IP 헤더 정보를 변경시키고, ICMP 헤더를 가르키는 구조체를 만들어 ICMP 헤더 정보를 변경시킵니다. <br>
그 후 소켓의 주소를 설정하고 반복문을 통해 패킷을 사용자가 멈출 때 까지 보냅니다. <br>
페이로드가 임의의값으로 매번 채워지기 때문에 체크섬 계산 함수를 사용하여 패킷을 보낼 때마다 체크섬 계산을 해주어야 합니다. <br>
 
### SYN Flooding ([syn_flooding.c](https://github.com/op2gs2/Denial_of_Service_in_c/blob/main/syn_flooding.c))

함수의 변수를 선언 후, IP주소들을 매개변수로부터 받아와 별도의 변수에 저장합니다. 소켓을 생성하고, 목적지 주소 정보를 설정해 줍니다. <br>
iphdr 구조체를 이용해, IP 헤더 정보를 설정합니다. 그 다음, 별도의 함수를 통해 IP헤더의 체크섬을 계산합니다. <br>
tcphdr 구조체를 이용해, TCP 헤더 정보를 설정합니다. 그 다음, 별도의 함수와 가짜 헤더 구조체를 통해 TCP헤더의 체크섬을 계산합니다. <br>
(이는 TCP 헤더 구조상, IP 헤더 만큼의 공간을 포함해야 체크섬을 계산해야 하기 때문입니다.) <br>
setsockopt()를 이용해서 커널에 헤더값을 변경하지 말 것을 알려주고, sendto()를 이용해 패킷을 전송합니다. <br>
만약 정교한 공격을 원한다면, sleep()을 통해 패킷 전송에 Interval을 주거나, Source의 IP주소나 포트번호를 무작위로 설정하는 방법이 있습니다.

## 프로그램 사용법

### 구동환경
이 코드는 리눅스 환경에서 작동합니다. <br>
윈도우 환경에서 구동하려면, [WSL](https://docs.microsoft.com/en-us/windows/wsl/about) 이나 [Cygwin](https://www.cygwin.com/) 이나 가상머신을 활용해야 합니다.

### 컴파일하는 방법
본 코드는 실행파일을 제공하지 않으므로, 컴파일을 직접해야 합니다. <br>
컴파일하기 전에, 모든 소스코드가 동일한 디렉토리에 존재해야 합니다. <br>
컴파일 방법은 다음과 같습니다: 
```bash
$ gcc -o DoS DoS.c
```

### 실행방법
컴파일을 통해 실행파일을 생성하면, 코드를 구동할 수 있습니다. <br>
프로그램 사용방법은 다음과 같습니다. <br>
(단, 슈퍼 유저 권한을 통해 구동해야 합니다.) 
```bash
$ sudo ./DoS [옵션] [송신지IP 주소] [목적지IP 주소]
```
실행가능한 옵션은 다음과 같습니다.: <br>
(추후 업데이트를 통해, 다른 공격도 추가할 예정입니다.)
- "-i" : Ping of Death 공격
- "-s" : SYN_Flooding 공격

## 개발 결과물의 필요성 및 활용 방안

### 개발 필요성
한 학기 동안 배운 내용과 평소 관심 갖던 정보보안 분야의 프로그램을 직접 구현하고 싶었습니다. 리눅스 환경에서 프로그래밍을 통해 DoS 공격을 실제로
재현해보고, 가상 서버의 패킷 로그를 분석하는 것이 정보보안 학습에 많은 도움이 될 것이라 생각해 개발하게 되었습니다.
시스템프로그래밍 프로젝트에서 멈추지 않고, 다양한 공격기법을 적용할 계획에 있습니다.

### 활용 방안
1인 웹사이트의 개설이 증가하며, DoS 공격의 위험이 증가하고 있습니다. 본 SW 를
활용한 모의해킹을 통해, 보안 위협에 미리 대비할수 있도록 할 수 있습니다. 네트워크 기능을 가지고 있는
기기나 자산을 공략하여, 보안위협으로부터 대비할 수 있도록 하는 역할을 가지게 됩니다. 또한 "컴퓨터 보안"
공부에 어려움을 느끼는 학생들도 본 도구를 활용하여 DoS 공격을 쉽게 다가갈 수 있을 것이라 기대합니다.

